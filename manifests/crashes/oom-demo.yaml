apiVersion: v1
kind: Pod
metadata:
  name: oom-killed-demo
spec:
  containers:
    - name: memory-hog
      image: busybox
      resources:
        limits:
          memory: "50Mi"
        requests:
          memory: "20Mi"
      command:
        - sh
        - -c
        - |
          echo "Starting OOM memory stress test..."
          echo "Memory limit set to 50Mi"
          i=1
          data="x"

          while true; do
            data="$data$data$data$data$data$data$data$data"
            size=$(echo "$data" | wc -c)
            echo "[LOG] Iteration: $i | Approx memory used: $size bytes"
            i=$((i+1))
            sleep 0.5
          done
